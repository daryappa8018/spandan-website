(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[28],{1279:function(e,t,a){Promise.resolve().then(a.bind(a,4288))},4288:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return d},dynamic:function(){return i}});var s=a(7437),l=a(2265),r=a(9376),n=a(206),o=a(1788);let i="force-dynamic";function d(){let e=(0,r.useRouter)(),[t,a]=(0,l.useState)(!1),[i,d]=(0,l.useState)(""),[c,m]=(0,l.useState)({title:"",category:"",date:"",month:"",year:new Date().getFullYear(),summary:"",slug:"",published:!0}),[u,x]=(0,l.useState)([""]),[h,p]=(0,l.useState)(!1),[b,g]=(0,l.useState)({location:"",duration:"",context:"",goal:"",target:"",preparation:[""],process:[""],team:"",volunteers:"",impact:"",challenges:"",learnings:"",partners:[""],photosNote:"",dataNote:""}),[v,j]=(0,l.useState)([{key:"",value:""}]),f=e=>{let{name:t,value:a}=e.target;if(m(e=>({...e,[t]:a})),"title"===t){let e=a.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");m(t=>({...t,slug:e}))}},N=e=>{let{name:t,value:a}=e.target;g(e=>({...e,[t]:a}))},y=e=>{"metrics"===e?x([...u,""]):g(t=>({...t,[e]:[...t[e],""]}))},C=(e,t,a)=>{if("metrics"===e){let e=[...u];e[t]=a,x(e)}else g(s=>{let l=[...s[e]];return l[t]=a,{...s,[e]:l}})},w=(e,t)=>{"metrics"===e?x(u.filter((e,a)=>a!==t)):g(a=>({...a,[e]:a[e].filter((e,a)=>a!==t)}))},D=(e,t,a)=>{let s=[...v];s[e][t]=a,j(s)},k=e=>{j(v.filter((t,a)=>a!==e))},S=async t=>{t.preventDefault(),a(!0),d("");try{let t={...c,metrics:u.filter(e=>e.trim()),details:h?{...b,preparation:b.preparation.filter(e=>e.trim()),process:b.process.filter(e=>e.trim()),partners:b.partners.filter(e=>e.trim()),outcomeMetrics:v.filter(e=>e.key&&e.value).reduce((e,t)=>({...e,[t.key]:t.value}),{})}:null},a=await fetch("/api/admin/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to create event")}e.push("/admin/events"),e.refresh()}catch(e){d(e.message),a(!1)}};return(0,s.jsx)(n.default,{children:(0,s.jsxs)("div",{className:"max-w-4xl",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-semibold text-slate-900 mb-2",children:"Create New Event"}),(0,s.jsx)("p",{className:"text-slate-600",children:"Add a new event to the website."})]}),i&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded mb-6",children:i}),(0,s.jsx)("div",{className:"bg-white border border-slate-200 rounded-lg p-6",children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Basic Information"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(o.W,{label:"Event Title",name:"title",value:c.title,onChange:f,required:!0,placeholder:"e.g., Blood Donation Camp - Campus"}),(0,s.jsx)(o.W,{label:"Category",name:"category",type:"select",value:c.category,onChange:f,required:!0,options:[{value:"BLOOD_DONATION",label:"Blood Donation Camp"},{value:"VILLAGE_CAMP",label:"Village Camp"},{value:"HEALTH_CHECKUP",label:"Health Checkup Camp"},{value:"DONATION_DRIVE",label:"Donation Drive"},{value:"SHORT_EVENT",label:"Short Event"}]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,s.jsx)(o.W,{label:"Date (display)",name:"date",value:c.date,onChange:f,required:!0,placeholder:"e.g., November 2024"}),(0,s.jsx)(o.W,{label:"Month (short)",name:"month",value:c.month,onChange:f,required:!0,placeholder:"e.g., Nov"}),(0,s.jsx)(o.W,{label:"Year",name:"year",type:"number",value:c.year,onChange:f,required:!0})]}),(0,s.jsx)(o.W,{label:"Summary",name:"summary",type:"textarea",value:c.summary,onChange:f,required:!0,rows:3,placeholder:"Brief description for event listing..."}),(0,s.jsx)(o.W,{label:"URL Slug",name:"slug",value:c.slug,onChange:f,required:!0,helpText:"Auto-generated from title. Used in URL: /events/your-slug"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",id:"published",checked:c.published,onChange:e=>m({...c,published:e.target.checked}),className:"w-4 h-4"}),(0,s.jsx)("label",{htmlFor:"published",className:"text-sm text-slate-700",children:"Publish immediately"})]})]})]}),(0,s.jsxs)("div",{className:"border-t border-slate-200 pt-6",children:[(0,s.jsx)("h3",{className:"text-base font-semibold text-slate-900 mb-4",children:"Metrics (Quick Stats)"}),(0,s.jsxs)("div",{className:"space-y-2",children:[u.map((e,t)=>(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{type:"text",value:e,onChange:e=>C("metrics",t,e.target.value),placeholder:"e.g., 82 donors",className:"flex-1 px-4 py-2 border border-slate-300 rounded focus:outline-none focus:ring-2 focus:ring-[#3d3e65]"}),u.length>1&&(0,s.jsx)("button",{type:"button",onClick:()=>w("metrics",t),className:"px-3 py-2 text-red-600 hover:bg-red-50 rounded",children:"Remove"})]},t)),(0,s.jsx)("button",{type:"button",onClick:()=>y("metrics"),className:"text-sm text-[#3d3e65] hover:underline",children:"+ Add Metric"})]})]}),(0,s.jsxs)("div",{className:"border-t border-slate-200 pt-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)("input",{type:"checkbox",id:"hasDetails",checked:h,onChange:e=>p(e.target.checked),className:"w-4 h-4"}),(0,s.jsx)("label",{htmlFor:"hasDetails",className:"text-base font-semibold text-slate-900",children:"Add Detailed Documentation (Optional)"})]}),(0,s.jsx)("p",{className:"text-sm text-slate-600",children:"Include full event details: objectives, execution, outcomes, partners, etc."})]}),h&&(0,s.jsxs)("div",{className:"space-y-6 border-t border-slate-200 pt-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:"Detailed Documentation"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(o.W,{label:"Location",name:"location",value:b.location,onChange:N,placeholder:"e.g., College Campus, Main Auditorium"}),(0,s.jsx)(o.W,{label:"Duration",name:"duration",value:b.duration,onChange:N,placeholder:"e.g., 9:00 AM - 4:00 PM"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Objective"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(o.W,{label:"Context",name:"context",type:"textarea",value:b.context,onChange:N,rows:3}),(0,s.jsx)(o.W,{label:"Goal",name:"goal",type:"textarea",value:b.goal,onChange:N,rows:2}),(0,s.jsx)(o.W,{label:"Target",name:"target",value:b.target,onChange:N})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Execution - Preparation Steps"}),(0,s.jsxs)("div",{className:"space-y-2",children:[b.preparation.map((e,t)=>(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{type:"text",value:e,onChange:e=>C("preparation",t,e.target.value),placeholder:"Preparation step...",className:"flex-1 px-4 py-2 border border-slate-300 rounded focus:outline-none focus:ring-2 focus:ring-[#3d3e65]"}),b.preparation.length>1&&(0,s.jsx)("button",{type:"button",onClick:()=>w("preparation",t),className:"px-3 py-2 text-red-600 hover:bg-red-50 rounded",children:"Remove"})]},t)),(0,s.jsx)("button",{type:"button",onClick:()=>y("preparation"),className:"text-sm text-[#3d3e65] hover:underline",children:"+ Add Step"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Execution - Process"}),(0,s.jsxs)("div",{className:"space-y-2",children:[b.process.map((e,t)=>(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{type:"text",value:e,onChange:e=>C("process",t,e.target.value),placeholder:"Process step...",className:"flex-1 px-4 py-2 border border-slate-300 rounded focus:outline-none focus:ring-2 focus:ring-[#3d3e65]"}),b.process.length>1&&(0,s.jsx)("button",{type:"button",onClick:()=>w("process",t),className:"px-3 py-2 text-red-600 hover:bg-red-50 rounded",children:"Remove"})]},t)),(0,s.jsx)("button",{type:"button",onClick:()=>y("process"),className:"text-sm text-[#3d3e65] hover:underline",children:"+ Add Step"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(o.W,{label:"Team",name:"team",value:b.team,onChange:N,placeholder:"e.g., 12 Spandan members + 8 medical staff"}),(0,s.jsx)(o.W,{label:"Volunteers",name:"volunteers",value:b.volunteers,onChange:N,placeholder:"e.g., 12 student volunteers"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Outcome Metrics"}),(0,s.jsxs)("div",{className:"space-y-2",children:[v.map((e,t)=>(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{type:"text",value:e.key,onChange:e=>D(t,"key",e.target.value),placeholder:"Key (e.g., registrations)",className:"w-1/3 px-4 py-2 border border-slate-300 rounded focus:outline-none focus:ring-2 focus:ring-[#3d3e65]"}),(0,s.jsx)("input",{type:"text",value:e.value,onChange:e=>D(t,"value",e.target.value),placeholder:"Value (e.g., 94)",className:"flex-1 px-4 py-2 border border-slate-300 rounded focus:outline-none focus:ring-2 focus:ring-[#3d3e65]"}),v.length>1&&(0,s.jsx)("button",{type:"button",onClick:()=>k(t),className:"px-3 py-2 text-red-600 hover:bg-red-50 rounded",children:"Remove"})]},t)),(0,s.jsx)("button",{type:"button",onClick:()=>{j([...v,{key:"",value:""}])},className:"text-sm text-[#3d3e65] hover:underline",children:"+ Add Metric"})]})]}),(0,s.jsx)(o.W,{label:"Impact",name:"impact",type:"textarea",value:b.impact,onChange:N,rows:3}),(0,s.jsx)(o.W,{label:"Challenges",name:"challenges",type:"textarea",value:b.challenges,onChange:N,rows:2}),(0,s.jsx)(o.W,{label:"Learnings",name:"learnings",type:"textarea",value:b.learnings,onChange:N,rows:2}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Partner Organizations"}),(0,s.jsxs)("div",{className:"space-y-2",children:[b.partners.map((e,t)=>(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{type:"text",value:e,onChange:e=>C("partners",t,e.target.value),placeholder:"Partner organization name...",className:"flex-1 px-4 py-2 border border-slate-300 rounded focus:outline-none focus:ring-2 focus:ring-[#3d3e65]"}),b.partners.length>1&&(0,s.jsx)("button",{type:"button",onClick:()=>w("partners",t),className:"px-3 py-2 text-red-600 hover:bg-red-50 rounded",children:"Remove"})]},t)),(0,s.jsx)("button",{type:"button",onClick:()=>y("partners"),className:"text-sm text-[#3d3e65] hover:underline",children:"+ Add Partner"})]})]}),(0,s.jsx)(o.W,{label:"Photos Note",name:"photosNote",type:"textarea",value:b.photosNote,onChange:N,rows:2,placeholder:"e.g., Event photographs available with donor consent"}),(0,s.jsx)(o.W,{label:"Data Note",name:"dataNote",type:"textarea",value:b.dataNote,onChange:N,rows:2,placeholder:"e.g., Donor database maintained confidentially"})]}),(0,s.jsxs)("div",{className:"flex gap-4 pt-6 border-t border-slate-200",children:[(0,s.jsx)("button",{onClick:S,disabled:t,className:"bg-[#3d3e65] text-white px-6 py-3 rounded-lg font-medium hover:bg-slate-700 transition-colors disabled:opacity-50",children:t?"Creating...":"Create Event"}),(0,s.jsx)("a",{href:"/admin/events",className:"px-6 py-3 border border-slate-300 rounded-lg font-medium text-slate-700 hover:bg-slate-50 transition-colors",children:"Cancel"})]})]})})]})})}},206:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return n}});var s=a(7437),l=a(605),r=a(9376);function n(e){var t,a;let{children:n}=e,{data:o}=(0,l.useSession)(),i=(0,r.usePathname)(),d=e=>"/admin"===e?i===e:i.startsWith(e);return(0,s.jsxs)("div",{className:"min-h-screen bg-slate-50",children:[(0,s.jsx)("div",{className:"bg-white border-b border-slate-200 fixed top-0 left-0 right-0 z-10",children:(0,s.jsxs)("div",{className:"flex items-center justify-between px-6 py-4",children:[(0,s.jsx)("div",{className:"flex items-center gap-4",children:(0,s.jsxs)("a",{href:"/",className:"flex items-center gap-2 hover:opacity-80",children:[(0,s.jsx)("span",{className:"text-lg font-semibold text-[#3d3e65]",children:"Spandan"}),(0,s.jsx)("span",{className:"text-xs bg-slate-100 px-2 py-1 rounded",children:"Admin"})]})}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-slate-900",children:null==o?void 0:null===(t=o.user)||void 0===t?void 0:t.name}),(0,s.jsx)("p",{className:"text-xs text-slate-500",children:null==o?void 0:null===(a=o.user)||void 0===a?void 0:a.role})]}),(0,s.jsx)("button",{onClick:()=>(0,l.signOut)({callbackUrl:"/"}),className:"text-sm text-slate-600 hover:text-slate-900 px-4 py-2 border border-slate-300 rounded hover:bg-slate-50 transition-colors",children:"Sign Out"})]})]})}),(0,s.jsxs)("div",{className:"flex pt-16",children:[(0,s.jsxs)("aside",{className:"w-64 bg-white border-r border-slate-200 fixed left-0 bottom-0 top-16 overflow-y-auto",children:[(0,s.jsx)("nav",{className:"p-4 space-y-1",children:[{name:"Dashboard",href:"/admin",icon:"\uD83D\uDCCA"},{name:"Events",href:"/admin/events",icon:"\uD83D\uDCC5"},{name:"Team",href:"/admin/team",icon:"\uD83D\uDC65"},{name:"Tech Projects",href:"/admin/projects",icon:"\uD83D\uDCBB"},{name:"Impact Data",href:"/admin/impact",icon:"\uD83D\uDCC8"},{name:"Settings",href:"/admin/settings",icon:"⚙️"}].map(e=>(0,s.jsxs)("a",{href:e.href,className:"flex items-center gap-3 px-4 py-3 rounded-lg text-sm transition-colors ".concat(d(e.href)?"bg-[#3d3e65] text-white font-medium":"text-slate-700 hover:bg-slate-100"),children:[(0,s.jsx)("span",{children:e.icon}),(0,s.jsx)("span",{children:e.name})]},e.href))}),(0,s.jsxs)("div",{className:"p-4 border-t border-slate-200 mt-4",children:[(0,s.jsx)("p",{className:"text-xs font-semibold text-slate-500 uppercase mb-3",children:"Quick Actions"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("a",{href:"/admin/events/new",className:"block text-sm text-[#3d3e65] hover:underline",children:"+ New Event"}),(0,s.jsx)("a",{href:"/admin/team/new",className:"block text-sm text-[#3d3e65] hover:underline",children:"+ Add Team Member"}),(0,s.jsx)("a",{href:"/admin/projects/new",className:"block text-sm text-[#3d3e65] hover:underline",children:"+ New Project"})]})]}),(0,s.jsx)("div",{className:"p-4 border-t border-slate-200",children:(0,s.jsxs)("a",{href:"/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sm text-slate-600 hover:text-[#3d3e65]",children:[(0,s.jsx)("span",{children:"\uD83C\uDF10"}),(0,s.jsx)("span",{children:"View Public Site"})]})})]}),(0,s.jsx)("main",{className:"flex-1 ml-64 p-8",children:n})]})]})}},1788:function(e,t,a){"use strict";a.d(t,{W:function(){return l}});var s=a(7437);function l(e){let{label:t,name:a,type:l="text",value:r,onChange:n,placeholder:o,helpText:i,required:d=!1,disabled:c=!1,rows:m=4,options:u}=e,x="w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#3d3e65] focus:border-transparent disabled:bg-slate-100 disabled:cursor-not-allowed";return(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:a,className:"block text-sm font-medium text-slate-700 mb-2",children:[t,d&&(0,s.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),"textarea"===l?(0,s.jsx)("textarea",{id:a,name:a,value:r,onChange:n,placeholder:o,required:d,disabled:c,rows:m,className:x}):"select"===l?(0,s.jsxs)("select",{id:a,name:a,value:r,onChange:n,required:d,disabled:c,className:x,children:[(0,s.jsxs)("option",{value:"",children:["Select ",t]}),null==u?void 0:u.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))]}):(0,s.jsx)("input",{id:a,name:a,type:l,value:r,onChange:n,placeholder:o,required:d,disabled:c,className:x}),i&&(0,s.jsx)("p",{className:"mt-1 text-xs text-slate-500",children:i})]})}a(2265)},9376:function(e,t,a){"use strict";var s=a(5475);a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})}},function(e){e.O(0,[605,971,117,744],function(){return e(e.s=1279)}),_N_E=e.O()}]);