(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[588],{2673:function(e,s,a){Promise.resolve().then(a.bind(a,3374))},3374:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return d}});var t=a(7437),r=a(2265),l=a(206),n=a(1788);function d(){let[e,s]=(0,r.useState)(!0),[a,d]=(0,r.useState)(!1),[i,c]=(0,r.useState)(""),[o,m]=(0,r.useState)(""),[p,u]=(0,r.useState)({yearsActive:2,totalEvents:0,peopleReached:"0",volunteers:0}),[x,h]=(0,r.useState)([]),[b,v]=(0,r.useState)(null);(0,r.useEffect)(()=>{Promise.all([fetch("/api/admin/impact/summary").then(e=>e.json()),fetch("/api/admin/impact/years").then(e=>e.json())]).then(e=>{let[a,t]=e;a[0]&&u({yearsActive:a[0].yearsActive,totalEvents:a[0].totalEvents,peopleReached:a[0].peopleReached,volunteers:a[0].volunteers}),h(t.sort((e,s)=>s.year-e.year)),s(!1)}).catch(()=>{m("Failed to load impact data"),s(!1)})},[]);let g=e=>{let{name:s,value:a}=e.target;u(e=>({...e,[s]:"peopleReached"===s?a:parseInt(a)||0}))},j=(e,s,a)=>{h(t=>t.map(t=>t.year===e?{...t,[s]:parseInt(a)||0}:t))},y=async()=>{d(!0),m("");try{if(!(await fetch("/api/admin/impact/summary",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)})).ok)throw Error("Failed to save summary");c("Summary saved!"),setTimeout(()=>c(""),2e3)}catch(e){m(e.message)}finally{d(!1)}},f=async e=>{d(!0),m("");try{if(!(await fetch("/api/admin/impact/years",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Failed to save year data");c("".concat(e.year," data saved!")),v(null),setTimeout(()=>c(""),2e3)}catch(e){m(e.message)}finally{d(!1)}};return e?(0,t.jsx)(l.default,{children:(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)("p",{className:"text-slate-600",children:"Loading impact data..."})})}):(0,t.jsx)(l.default,{children:(0,t.jsxs)("div",{className:"max-w-5xl",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-semibold text-slate-900 mb-2",children:"Impact Data Management"}),(0,t.jsx)("p",{className:"text-slate-600",children:"Manage overall summary and yearly impact statistics."})]}),i&&(0,t.jsx)("div",{className:"bg-green-50 border border-green-200 text-green-800 px-4 py-3 rounded mb-6",children:i}),o&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded mb-6",children:o}),(0,t.jsxs)("div",{className:"bg-white border border-slate-200 rounded-lg p-6 mb-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Overall Summary"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)(n.W,{label:"Years Active",name:"yearsActive",type:"number",value:p.yearsActive,onChange:g}),(0,t.jsx)(n.W,{label:"Total Events",name:"totalEvents",type:"number",value:p.totalEvents,onChange:g}),(0,t.jsx)(n.W,{label:"People Reached",name:"peopleReached",value:p.peopleReached,onChange:g,placeholder:"e.g., 2,400+"}),(0,t.jsx)(n.W,{label:"Active Volunteers",name:"volunteers",type:"number",value:p.volunteers,onChange:g})]}),(0,t.jsx)("button",{onClick:y,disabled:a,className:"mt-4 bg-[#3d3e65] text-white px-6 py-2 rounded-lg text-sm font-medium hover:bg-slate-700 disabled:opacity-50",children:a?"Saving...":"Save Summary"})]}),(0,t.jsxs)("div",{className:"bg-white border border-slate-200 rounded-lg p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:"Yearly Data"}),(0,t.jsx)("button",{onClick:()=>{let e=new Date().getFullYear();h([{year:e,bdCamps:0,bdDonors:0,bdUnits:0,bdHospitals:0,vcCamps:0,vcVillages:0,vcParticipants:0,vcReferrals:0,hcCamps:0,hcScreenings:0,hcReferrals:0,ddDrives:0,ddItems:0,ddFamilies:0,seEvents:0,seParticipants:0},...x]),v(e)},className:"text-sm text-[#3d3e65] hover:underline",children:"+ Add Year"})]}),(0,t.jsx)("div",{className:"space-y-6",children:x.map(e=>(0,t.jsxs)("div",{className:"border border-slate-200 rounded-lg p-5",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-slate-900",children:e.year}),(0,t.jsx)("button",{onClick:()=>v(b===e.year?null:e.year),className:"text-sm text-[#3d3e65] hover:underline",children:b===e.year?"Collapse":"Edit"})]}),b===e.year?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Blood Donation Camps"}),(0,t.jsxs)("div",{className:"grid grid-cols-4 gap-3",children:[(0,t.jsx)("input",{type:"number",value:e.bdCamps,onChange:s=>j(e.year,"bdCamps",s.target.value),placeholder:"Camps",className:"px-3 py-2 border border-slate-300 rounded text-sm"}),(0,t.jsx)("input",{type:"number",value:e.bdDonors,onChange:s=>j(e.year,"bdDonors",s.target.value),placeholder:"Donors",className:"px-3 py-2 border border-slate-300 rounded text-sm"}),(0,t.jsx)("input",{type:"number",value:e.bdUnits,onChange:s=>j(e.year,"bdUnits",s.target.value),placeholder:"Units",className:"px-3 py-2 border border-slate-300 rounded text-sm"}),(0,t.jsx)("input",{type:"number",value:e.bdHospitals,onChange:s=>j(e.year,"bdHospitals",s.target.value),placeholder:"Hospitals",className:"px-3 py-2 border border-slate-300 rounded text-sm"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Village Camps"}),(0,t.jsxs)("div",{className:"grid grid-cols-4 gap-3",children:[(0,t.jsx)("input",{type:"number",value:e.vcCamps,onChange:s=>j(e.year,"vcCamps",s.target.value),placeholder:"Camps",className:"px-3 py-2 border border-slate-300 rounded text-sm"}),(0,t.jsx)("input",{type:"number",value:e.vcVillages,onChange:s=>j(e.year,"vcVillages",s.target.value),placeholder:"Villages",className:"px-3 py-2 border border-slate-300 rounded text-sm"}),(0,t.jsx)("input",{type:"number",value:e.vcParticipants,onChange:s=>j(e.year,"vcParticipants",s.target.value),placeholder:"Participants",className:"px-3 py-2 border border-slate-300 rounded text-sm"}),(0,t.jsx)("input",{type:"number",value:e.vcReferrals,onChange:s=>j(e.year,"vcReferrals",s.target.value),placeholder:"Referrals",className:"px-3 py-2 border border-slate-300 rounded text-sm"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Health Checkup Camps"}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,t.jsx)("input",{type:"number",value:e.hcCamps,onChange:s=>j(e.year,"hcCamps",s.target.value),placeholder:"Camps",className:"px-3 py-2 border border-slate-300 rounded text-sm"}),(0,t.jsx)("input",{type:"number",value:e.hcScreenings,onChange:s=>j(e.year,"hcScreenings",s.target.value),placeholder:"Screenings",className:"px-3 py-2 border border-slate-300 rounded text-sm"}),(0,t.jsx)("input",{type:"number",value:e.hcReferrals,onChange:s=>j(e.year,"hcReferrals",s.target.value),placeholder:"Referrals",className:"px-3 py-2 border border-slate-300 rounded text-sm"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Donation Drives"}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,t.jsx)("input",{type:"number",value:e.ddDrives,onChange:s=>j(e.year,"ddDrives",s.target.value),placeholder:"Drives",className:"px-3 py-2 border border-slate-300 rounded text-sm"}),(0,t.jsx)("input",{type:"number",value:e.ddItems,onChange:s=>j(e.year,"ddItems",s.target.value),placeholder:"Items",className:"px-3 py-2 border border-slate-300 rounded text-sm"}),(0,t.jsx)("input",{type:"number",value:e.ddFamilies,onChange:s=>j(e.year,"ddFamilies",s.target.value),placeholder:"Families",className:"px-3 py-2 border border-slate-300 rounded text-sm"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Short Events"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsx)("input",{type:"number",value:e.seEvents,onChange:s=>j(e.year,"seEvents",s.target.value),placeholder:"Events",className:"px-3 py-2 border border-slate-300 rounded text-sm"}),(0,t.jsx)("input",{type:"number",value:e.seParticipants,onChange:s=>j(e.year,"seParticipants",s.target.value),placeholder:"Participants",className:"px-3 py-2 border border-slate-300 rounded text-sm"})]})]}),(0,t.jsx)("button",{onClick:()=>f(e),disabled:a,className:"bg-[#3d3e65] text-white px-6 py-2 rounded-lg text-sm font-medium hover:bg-slate-700 disabled:opacity-50",children:a?"Saving...":"Save ".concat(e.year)})]}):(0,t.jsxs)("div",{className:"grid grid-cols-5 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-slate-500",children:"BD Camps"}),(0,t.jsx)("p",{className:"font-medium",children:e.bdCamps})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-slate-500",children:"Village Camps"}),(0,t.jsx)("p",{className:"font-medium",children:e.vcCamps})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-slate-500",children:"Health Camps"}),(0,t.jsx)("p",{className:"font-medium",children:e.hcCamps})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-slate-500",children:"Donations"}),(0,t.jsx)("p",{className:"font-medium",children:e.ddDrives})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-slate-500",children:"Short Events"}),(0,t.jsx)("p",{className:"font-medium",children:e.seEvents})]})]})]},e.year))})]})]})})}},206:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return n}});var t=a(7437),r=a(605),l=a(9376);function n(e){var s,a;let{children:n}=e,{data:d}=(0,r.useSession)(),i=(0,l.usePathname)(),c=e=>"/admin"===e?i===e:i.startsWith(e);return(0,t.jsxs)("div",{className:"min-h-screen bg-slate-50",children:[(0,t.jsx)("div",{className:"bg-white border-b border-slate-200 fixed top-0 left-0 right-0 z-10",children:(0,t.jsxs)("div",{className:"flex items-center justify-between px-6 py-4",children:[(0,t.jsx)("div",{className:"flex items-center gap-4",children:(0,t.jsxs)("a",{href:"/",className:"flex items-center gap-2 hover:opacity-80",children:[(0,t.jsx)("span",{className:"text-lg font-semibold text-[#3d3e65]",children:"Spandan"}),(0,t.jsx)("span",{className:"text-xs bg-slate-100 px-2 py-1 rounded",children:"Admin"})]})}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-slate-900",children:null==d?void 0:null===(s=d.user)||void 0===s?void 0:s.name}),(0,t.jsx)("p",{className:"text-xs text-slate-500",children:null==d?void 0:null===(a=d.user)||void 0===a?void 0:a.role})]}),(0,t.jsx)("button",{onClick:()=>(0,r.signOut)({callbackUrl:"/"}),className:"text-sm text-slate-600 hover:text-slate-900 px-4 py-2 border border-slate-300 rounded hover:bg-slate-50 transition-colors",children:"Sign Out"})]})]})}),(0,t.jsxs)("div",{className:"flex pt-16",children:[(0,t.jsxs)("aside",{className:"w-64 bg-white border-r border-slate-200 fixed left-0 bottom-0 top-16 overflow-y-auto",children:[(0,t.jsx)("nav",{className:"p-4 space-y-1",children:[{name:"Dashboard",href:"/admin",icon:"\uD83D\uDCCA"},{name:"Events",href:"/admin/events",icon:"\uD83D\uDCC5"},{name:"Team",href:"/admin/team",icon:"\uD83D\uDC65"},{name:"Tech Projects",href:"/admin/projects",icon:"\uD83D\uDCBB"},{name:"Impact Data",href:"/admin/impact",icon:"\uD83D\uDCC8"},{name:"Settings",href:"/admin/settings",icon:"⚙️"}].map(e=>(0,t.jsxs)("a",{href:e.href,className:"flex items-center gap-3 px-4 py-3 rounded-lg text-sm transition-colors ".concat(c(e.href)?"bg-[#3d3e65] text-white font-medium":"text-slate-700 hover:bg-slate-100"),children:[(0,t.jsx)("span",{children:e.icon}),(0,t.jsx)("span",{children:e.name})]},e.href))}),(0,t.jsxs)("div",{className:"p-4 border-t border-slate-200 mt-4",children:[(0,t.jsx)("p",{className:"text-xs font-semibold text-slate-500 uppercase mb-3",children:"Quick Actions"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("a",{href:"/admin/events/new",className:"block text-sm text-[#3d3e65] hover:underline",children:"+ New Event"}),(0,t.jsx)("a",{href:"/admin/team/new",className:"block text-sm text-[#3d3e65] hover:underline",children:"+ Add Team Member"}),(0,t.jsx)("a",{href:"/admin/projects/new",className:"block text-sm text-[#3d3e65] hover:underline",children:"+ New Project"})]})]}),(0,t.jsx)("div",{className:"p-4 border-t border-slate-200",children:(0,t.jsxs)("a",{href:"/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sm text-slate-600 hover:text-[#3d3e65]",children:[(0,t.jsx)("span",{children:"\uD83C\uDF10"}),(0,t.jsx)("span",{children:"View Public Site"})]})})]}),(0,t.jsx)("main",{className:"flex-1 ml-64 p-8",children:n})]})]})}},1788:function(e,s,a){"use strict";a.d(s,{W:function(){return r}});var t=a(7437);function r(e){let{label:s,name:a,type:r="text",value:l,onChange:n,placeholder:d,helpText:i,required:c=!1,disabled:o=!1,rows:m=4,options:p}=e,u="w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#3d3e65] focus:border-transparent disabled:bg-slate-100 disabled:cursor-not-allowed";return(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:a,className:"block text-sm font-medium text-slate-700 mb-2",children:[s,c&&(0,t.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),"textarea"===r?(0,t.jsx)("textarea",{id:a,name:a,value:l,onChange:n,placeholder:d,required:c,disabled:o,rows:m,className:u}):"select"===r?(0,t.jsxs)("select",{id:a,name:a,value:l,onChange:n,required:c,disabled:o,className:u,children:[(0,t.jsxs)("option",{value:"",children:["Select ",s]}),null==p?void 0:p.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))]}):(0,t.jsx)("input",{id:a,name:a,type:r,value:l,onChange:n,placeholder:d,required:c,disabled:o,className:u}),i&&(0,t.jsx)("p",{className:"mt-1 text-xs text-slate-500",children:i})]})}a(2265)},9376:function(e,s,a){"use strict";var t=a(5475);a.o(t,"usePathname")&&a.d(s,{usePathname:function(){return t.usePathname}}),a.o(t,"useRouter")&&a.d(s,{useRouter:function(){return t.useRouter}}),a.o(t,"useSearchParams")&&a.d(s,{useSearchParams:function(){return t.useSearchParams}})}},function(e){e.O(0,[605,971,117,744],function(){return e(e.s=2673)}),_N_E=e.O()}]);